<!-- Modal -->
<div class="modal-header">
  <h4 class="modal-title">
    {{ isEditMode ? "Editar Usuario" : "Crear Usuario" }}
  </h4>
  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="close()"
  ></button>
</div>
<div class="modal-body">
  <form
    class="d-flex flex-column justify-content-center gap-3"
    [formGroup]="userForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="row">
      <div class="form-group col-md-6">
        <label for="name">Nombres</label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
          [ngClass]="{ 'is-invalid': isFieldInvalid('name') }"
        />
        <div *ngIf="isFieldInvalid('name')" class="invalid-feedback">
          Este campo requerido y no puede exceder los 50 caracteres.
        </div>
      </div>
      <div class="form-group col-md-6">
        <label for="lastName">Apellidos</label>
        <input
          type="text"
          id="lastName"
          class="form-control"
          formControlName="lastName"
          [ngClass]="{ 'is-invalid': isFieldInvalid('lastName') }"
        />
        <div *ngIf="isFieldInvalid('lastName')" class="invalid-feedback">
          Este campo es requerido y no puede exceder los 50 caracteres.
        </div>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-6">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          class="form-control"
          formControlName="email"
          [ngClass]="{ 'is-invalid': isFieldInvalid('email') }"
        />
        <div *ngIf="isFieldInvalid('email')" class="invalid-feedback">
          Ingresa un email válido.
        </div>
      </div>
      <div class="form-group col-md-6">
        <label for="birthdayDate">Fecha de Nacimiento</label>
        <input
          type="date"
          id="birthdayDate"
          class="form-control"
          formControlName="birthdayDate"
          [ngClass]="{ 'is-invalid': isFieldInvalid('birthdayDate') }"
        />
        <div *ngIf="isFieldInvalid('birthdayDate')" class="invalid-feedback">
          La fecha de nacimiento es requerida.
        </div>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-6">
        <label for="documentNumber">Número de Documento</label>
        <input
          type="number"
          id="documentNumber"
          class="form-control"
          formControlName="documentNumber"
          [ngClass]="{
            'is-invalid': isFieldInvalid('documentNumber')
          }"
        />
        <div *ngIf="isFieldInvalid('documentNumber')" class="invalid-feedback">
          El número de documento es requerido y debe tener 7 dígitos.
        </div>
      </div>
      <div class="form-group col-md-6">
        <label for="area">Área</label>
        <input
          type="number"
          id="area"
          class="form-control"
          formControlName="area"
          [ngClass]="{ 'is-invalid': isFieldInvalid('area') }"
        />
        <div *ngIf="isFieldInvalid('area')" class="invalid-feedback">
          El área es requerida y debe tener 2 dígitos.
        </div>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-6">
        <label for="salary">Salario</label>
        <input
          type="number"
          id="salary"
          step="0.01"
          class="form-control"
          formControlName="salary"
          [ngClass]="{ 'is-invalid': isFieldInvalid('salary') }"
        />
        <div *ngIf="isFieldInvalid('salary')" class="invalid-feedback">
          El salario es requerido y debe tener máximo 10 dígitos y 2 decimales.
        </div>
      </div>
      <div class="form-group col-md-6">
        <label for="status">Estado</label>
        <select
          id="status"
          class="form-control"
          formControlName="status"
          [ngClass]="{ 'is-invalid': isFieldInvalid('status') }"
        >
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>
        <div *ngIf="isFieldInvalid('status')" class="invalid-feedback">
          El estado es requerido.
        </div>
      </div>
    </div>
  </form>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="close()">
    Cerrar
  </button>
  <button
    *ngIf="!loading"
    type="submit"
    class="btn btn-primary"
    [disabled]="userForm.invalid"
    (click)="onSubmit()"
  >
    {{ isEditMode ? "Editar Usuario" : "Crear Usuario" }}
  </button>
  <button
    *ngIf="loading"
    type="submit"
    class="btn btn-primary"
    [disabled]="userForm.invalid"
  >
    Cargando...
  </button>
</div>
